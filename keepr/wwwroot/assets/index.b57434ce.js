import{r as e,c as t,o as a,a as s,b as l,F as o,d as n,S as r,C as i,p as c,e as d,u,f as p,$ as m,w as v,v as g,g as f,t as b,h as y,i as w,j as h,k,l as V,m as K,n as _,q as x,s as P,x as T,y as I,z as S,A}from"./vendor.5f237f48.js";const C=e({user:{},account:{},profile:{},keeps:[],activeKeep:{},vaults:[],activeVault:{},vaultkeep:{},vaultkeeps:[]});const E={name:"App",setup:()=>({appState:t((()=>C))})},O=l("footer",null,null,-1);E.render=function(e,t,r,i,c,d){const u=n("Navbar"),p=n("router-view");return a(),s(o,null,[l("header",null,[l(u)]),l("main",null,[l(p)]),O],64)};class D{static async confirm(e="Are you sure?",t="You won't be able to revert this!",a="warning",s="Yes, delete it!"){try{return!!(await r.fire({title:e,text:t,icon:a,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:s})).isConfirmed}catch(l){return!1}}static toast(e="Warning!",t="warning",a="top-end",s=3e3,l=!0){r.fire({title:e,icon:t,position:a,timer:s,timerProgressBar:l,toast:!0,showConfirmButton:!1})}}const U=window.location.origin.includes("localhost"),j=U?"https://localhost:5001":"";function B(e,t){if(U)console[e](`[${e}] :: ${(new Date).toLocaleTimeString()} :: `,...t);else{switch(e){case"log":case"assert":return}console[e](`[${e}] :: ${(new Date).toLocaleTimeString()} :: `,...t)}}const N={log(){B("log",arguments)},error(){B("error",arguments)},warn(){B("warn",arguments)},assert(){B("assert",arguments)},trace(){B("trace",arguments)}},R=i.create({baseURL:j,timeout:8e3});const $=new class{async getAllKeeps(){const e=await R.get("api/keeps");C.keeps=e.data}async getKeepById(e){const t=C.keeps.find((t=>t.id.toString()===e));if(t)return C.activeKeep=t,void(C.activeKeep.views=C.activeKeep.views+1);const a=await R.get(`api/keeps/${e}`);C.activeKeep=a.data,C.activeKeep.views++}async getKeepsByProfileId(e){const t=await R.get(`api/profiles/${e}/keeps`);C.keeps=t.data}async getKeepsByVaultId(e){const t=await R.get(`api/vaults/${e}/keeps`);C.keeps=t.data}async createKeep(e){const t=await R.post("/api/keeps",e);C.keeps.push(t.data)}async deleteKeep(e){await R.delete("api/keeps/"+e),$.getAllKeeps()}async addKeepToVault(e){const t=await R.post("api/vaultkeeps",e);C.vaultKeep=t.data}async removeKeepFromVault(e){await R.delete("api/vaultkeeps/"+e),C.vaultkeeps=C.vaultkeeps.filter((t=>t.id!==e))}async editTask(e,t){return(await R.put("api/tasks/"+t,e)).data.sprintId}};const z=new class{async getVaultById(e){const t=C.vaults.find((t=>t.id.toString()===e));if(t)return void(C.activeVault=t);const a=await R.get(`api/vaults/${e}`);C.activeVault=a.data}async getVaultsByProfileId(e){const t=await R.get(`api/profiles/${e}/vaults`);C.vaults=t.data}async createVault(e){const t=await R.post("/api/vaults",e);C.vaults.push(t.data)}async deleteVault(e){await R.delete("api/vaults/"+e)}};const L={props:{keep:{type:Object,required:!0}},setup(e){const a=u();return p(),{vaults:t((()=>C.vaults)),account:t((()=>C.account)),homepage:t((()=>"/"===a.path||"/profiles/613b964d03553023fe6ab5c4"===a.path||"/profiles/613b9e1845bd361e7d817142"===a.path||"/profiles/6133dba33605ba4cd98b9c35"===a.path)),async setActiveKeep(e){await $.getKeepById(e),await z.getVaultsByProfileId(C.account.id),m("#keep-modal"+e).modal("show")},async removeKeep(){try{await D.confirm()&&(await $.removeKeepFromVault(e.keep.vaultKeepId),await $.getKeepsByVaultId(a.params.id),D.toast("Successfully Removed!","success"))}catch(t){D.toast(t,"error")}}}},components:{}},H=y("data-v-e5f0e95e");c("data-v-e5f0e95e");const M={class:"keep card img-fluid rounded elevation-1 bg-light my-3 text-left selectable"},q={class:"card-img-overlay d-flex"};d();const Y=H(((e,t,r,i,c,d)=>{var u;const p=n("router-link"),m=n("KeepModal");return a(),s(o,null,[l("div",M,[l("img",{class:"card-img-top",src:r.keep.img,alt:"Card image",style:{width:"100%"}},null,8,["src"]),l("div",q,[v(l("h5",{class:"hoverable titleText text-red",title:"Remove from vault",onClick:t[1]||(t[1]=(...e)=>i.removeKeep&&i.removeKeep(...e))}," X ",512),[[g,i.account.id==(null==(u=r.keep.creator)?void 0:u.id)&&0==i.homepage]]),l("h4",{class:"card-title text-white titleText mt-auto","data-toggle":"modal","data-target":"#keep-modal"+r.keep.id,onClick:t[2]||(t[2]=f((e=>i.setActiveKeep(r.keep.id)),["prevent"])),title:"See Keep Details"},b(r.keep.name),9,["data-target"]),l(p,{class:"mt-auto ml-auto",to:{name:"ProfilePage",params:{id:r.keep.creatorId}}},{default:H((()=>[l("img",{src:r.keep.creator.picture,alt:"profile image",class:"profile-pic mt-auto ml-auto",title:"Go to Profile Page"},null,8,["src"])])),_:1},8,["to"])])]),l(m)],64)}));L.render=Y,L.__scopeId="data-v-e5f0e95e";var W=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:L});let F;const G={},X=function(e,t){if(!t||0===t.length)return e();if(void 0===F){const e=document.createElement("link").relList;F=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in G)return;G[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":F,t||(s.as="script",s.crossOrigin=""),s.href=e,document.head.appendChild(s),t?new Promise(((e,t)=>{s.addEventListener("load",e),s.addEventListener("error",t)})):void 0}))).then((()=>e()))};function J(e){return()=>function(e){switch(e){case"./pages/AccountPage.vue":return X((()=>import("./AccountPage.242a4b62.js")),["/assets/AccountPage.242a4b62.js","/assets/AccountPage.f822174a.css","/assets/vendor.5f237f48.js"]);case"./pages/HomePage.vue":return X((()=>import("./HomePage.a0394dda.js")),["/assets/HomePage.a0394dda.js","/assets/HomePage.0efbf49a.css","/assets/vendor.5f237f48.js"]);case"./pages/ProfilePage.vue":return X((()=>import("./ProfilePage.44d8fe72.js")),["/assets/ProfilePage.44d8fe72.js","/assets/ProfilePage.f6a7cee5.css","/assets/vendor.5f237f48.js"]);case"./pages/VaultDetailsPage.vue":return X((()=>import("./VaultDetailsPage.e80bf783.js")),["/assets/VaultDetailsPage.e80bf783.js","/assets/vendor.5f237f48.js"]);default:return Promise.reject(new Error("Unknown variable dynamic import: "+e))}}(`./pages/${e}.vue`)}const Q=[{path:"/",name:"Home",component:J("HomePage"),beforeEnter:k},{path:"/vaults/:id",name:"VaultDetails",component:J("VaultDetailsPage"),beforeEnter:k},{path:"/profiles/:id",name:"ProfilePage",component:J("ProfilePage"),beforeEnter:k},{path:"/account",name:"Account",component:J("AccountPage"),beforeEnter:V}],Z=w({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:h(),routes:Q});const ee={props:{},setup(){const a=e({newVaultKeep:{}});return{state:a,keep:t((()=>C.activeKeep)),vaults:t((()=>C.vaults)),account:t((()=>C.account)),async addKeepToVault(e){try{await $.addKeepToVault({keepId:e,vaultId:a.newVaultKeep.vaultId}),D.toast(" has been added to your vault!","success"),m("#keep-modal"+C.activeKeep.id).modal("hide")}catch(t){D.toast(t,"error")}},async deleteKeep(){try{await D.confirm()&&(await $.deleteKeep(C.activeKeep.id),m("#keep-modal"+C.activeKeep.id).modal("hide"),D.toast("Successfully Deleted!","success"))}catch(e){D.toast(e,"error")}}}}},te=y("data-v-312745d1");c("data-v-312745d1");const ae={class:"modal-dialog modal-lg modal-dialog-centered",role:"document"},se={class:"modal-content container-fluid"},le={class:"row"},oe={class:"col-md-6 p-0"},ne={class:"col-md-6 d-flex flex-column"},re=l("div",{class:"text-right pt-2"},[l("p",{class:"btn btn-secondary","data-dismiss":"modal"}," X ")],-1),ie={class:"d-flex justify-content-around"},ce=l("span",{class:"fa fa-eye"},null,-1),de={class:"p-0 mb-2 align-items-center d-flex"},ue=l("span",null,[l("i",{class:"material-icons"},"attachment")],-1),pe=l("span",{class:"fa fa-share-alt"},null,-1),me={class:"pb-1"},ve={class:"d-flex"},ge={class:"text-left"},fe=l("div",{class:"border-top p-1 min"},null,-1),be={class:"mt-auto pb-1 d-flex align-items-center justify-content-around pt-5"},ye={class:"form-group"},we=l("button",{type:"submit",class:"btn btn-outline-secondary"}," Add to Vault ",-1),he=l("span",{class:"fa fa-trash"},null,-1);d();const ke=te(((e,t,n,r,i,c)=>{var d,u;return a(),s("div",{class:"modal",id:"keep-modal"+r.keep.id,tabindex:"-1",role:"dialog"},[l("div",ae,[l("div",se,[l("div",le,[l("div",oe,[l("img",{class:"pic h-100 p-1",src:r.keep.img,alt:"Keep image",style:{width:"100%"}},null,8,["src"])]),l("div",ne,[re,l("div",ie,[l("h6",null,[ce,K(" "+b(r.keep.views),1)]),l("h6",de,[ue,K(" "+b(r.keep.keeps),1)]),l("h6",null,[pe,K(b(r.keep.shares),1)])]),l("div",me,[l("h2",null,b(r.keep.name),1)]),l("div",ve,[l("h6",ge,b(r.keep.description),1)]),fe,l("div",be,[r.account.id?(a(),s("form",{key:0,onSubmit:t[2]||(t[2]=f((e=>r.addKeepToVault(r.keep.id)),["prevent"]))},[l("div",ye,[v(l("select",{name:"vaultName","onUpdate:modelValue":t[1]||(t[1]=e=>r.state.newVaultKeep.vaultId=e),class:"form-control","aria-describedby":"Vault Name"},[(a(!0),s(o,null,x(r.vaults,(e=>(a(),s("option",{key:e.id,value:e.id},b(e.name),9,["value"])))),128))],512),[[_,r.state.newVaultKeep.vaultId]]),we])],32)):P("",!0),r.account.id==r.keep.creatorId?(a(),s("p",{key:1,class:"m-0 hoverable",title:"Delete "+r.keep.name,onClick:t[3]||(t[3]=(...e)=>r.deleteKeep&&r.deleteKeep(...e))},[he],8,["title"])):P("",!0),l("div",null,[l("img",{src:null==(d=r.keep.creator)?void 0:d.picture,alt:"profile image",class:"profile-pic mt-auto ml-auto"},null,8,["src"]),K(" "+b(null==(u=r.keep.creator)?void 0:u.name),1)])])])])])])],8,["id"])}));ee.render=ke,ee.__scopeId="data-v-312745d1";var Ve=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ee});const Ke=new class{async getAccount(){try{const e=await R.get("/account");C.account=e.data}catch(e){N.error("HAVE YOU STARTED YOUR SERVER YET???",e)}}},_e=T({domain:"sc-codeworks.us.auth0.com",clientId:"n3o13WtGdGn49mzUqS4cqqozClY9VkR9",audience:"https://keeprSC.com",useRefreshTokens:!0,onRedirectCallback:e=>{Z.push(e&&e.targetUrl?e.targetUrl:window.location.pathname)}});async function xe(e){if(!_e.isAuthenticated)return e;const t=1e3*_e.identity.exp,a=t<Date.now(),s=t<Date.now()+432e5;return a?await _e.loginWithPopup():s&&(await _e.getTokenSilently(),R.defaults.headers.authorization=_e.bearer),e}_e.on(_e.AUTH_EVENTS.AUTHENTICATED,(async function(){R.defaults.headers.authorization=_e.bearer,R.interceptors.request.use(xe),C.user=_e.user,await Ke.getAccount()}));const Pe={setup:()=>({state:e({dropOpen:!1}),user:t((()=>C.user)),async login(){_e.loginWithPopup()},async logout(){_e.logout({returnTo:window.location.origin})}})},Te=y("data-v-953cef64");c("data-v-953cef64");const Ie={class:"navbar navbar-expand-lg navbar-dark bg-none shadow"},Se=l("div",{class:"d-flex flex-column align-items-center"},[l("h1",{class:"fonttop text-dark"}," Keepr ")],-1),Ae=l("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},[l("span",{class:"navbar-toggler-icon"})],-1),Ce={class:"collapse navbar-collapse",id:"navbarText"},Ee={class:"navbar-nav mr-auto"},Oe={class:"nav-item"},De=K(" Home "),Ue=l("li",{class:"nav-item"},null,-1),je={class:"navbar-text"},Be={key:1,class:"dropdown"},Ne={class:"mx-3 text-dark"},Re=l("div",{class:"list-group-item list-group-item-action hoverable"}," Account ",-1);d();const $e=Te(((e,t,o,r,i,c)=>{const d=n("router-link");return a(),s("nav",Ie,[l(d,{class:"navbar-brand d-flex",to:{name:"Home"}},{default:Te((()=>[Se])),_:1}),Ae,l("div",Ce,[l("ul",Ee,[l("li",Oe,[l(d,{to:{name:"Home"},class:"nav-link"},{default:Te((()=>[De])),_:1})]),Ue]),l("span",je,[r.user.isAuthenticated?(a(),s("div",Be,[l("div",{class:"dropdown-toggle",onClick:t[2]||(t[2]=e=>r.state.dropOpen=!r.state.dropOpen)},[l("img",{src:r.user.picture,alt:"user photo",height:"40",class:"rounded"},null,8,["src"]),l("span",Ne,b(r.user.name),1)]),l("div",{class:["dropdown-menu p-0 list-group w-100",{show:r.state.dropOpen}],onClick:t[4]||(t[4]=e=>r.state.dropOpen=!1)},[l(d,{to:{name:"Account"}},{default:Te((()=>[Re])),_:1}),l("div",{class:"list-group-item list-group-item-action hoverable",onClick:t[3]||(t[3]=(...e)=>r.logout&&r.logout(...e))}," logout ")],2)])):(a(),s("button",{key:0,class:"btn btn-outline-primary text-uppercase",onClick:t[1]||(t[1]=(...e)=>r.login&&r.login(...e))}," Login "))])])])}));Pe.render=$e,Pe.__scopeId="data-v-953cef64";var ze=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Pe});const Le={setup(){const t=e({newKeep:{}});return{state:t,async createKeep(){try{await $.createKeep(t.newKeep),m("#new-keep-modal").modal("hide"),t.newKeep={}}catch(e){D.toast(e,"error")}}}}},He=y("data-v-6ab676d8");c("data-v-6ab676d8");const Me={class:"new-keep-modal"},qe={class:"modal",id:"new-keep-modal",tabindex:"-1",role:"dialog","aria-labelledby":"modelTitleId","aria-hidden":"true"},Ye={class:"modal-dialog",role:"document"},We={class:"modal-content"},Fe=l("div",{class:"modal-header"},[l("h5",{class:"modal-title"}," Create New Keep "),l("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[l("span",{"aria-hidden":"true"},"×")])],-1),Ge={class:"modal-body text-left"},Xe={class:"form-group"},Je=l("label",{for:""},"Keep Name",-1),Qe={class:"form-group"},Ze=l("label",{class:"pr-2",for:"imgUrl"},"Cover Image",-1),et={class:"form-group"},tt=l("label",{for:"body"},"Description",-1),at=l("div",{class:"modal-footer"},[l("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Close "),l("button",{type:"submit",class:"btn btn-primary"}," Save ")],-1);d();const st=He(((e,t,o,n,r,i)=>(a(),s("div",Me,[l("div",qe,[l("div",Ye,[l("div",We,[Fe,l("div",Ge,[l("form",{onSubmit:t[4]||(t[4]=f(((...e)=>n.createKeep&&n.createKeep(...e)),["prevent"]))},[l("div",Xe,[Je,v(l("input",{type:"text",class:"form-control","aria-describedby":"name",placeholder:"Name...","onUpdate:modelValue":t[1]||(t[1]=e=>n.state.newKeep.name=e)},null,512),[[I,n.state.newKeep.name]])]),l("div",Qe,[Ze,v(l("input",{type:"text",id:"imgUrl",class:"form-control","aria-describedby":"imgUrl",placeholder:"Image Url...","onUpdate:modelValue":t[2]||(t[2]=e=>n.state.newKeep.img=e)},null,512),[[I,n.state.newKeep.img]])]),l("div",et,[tt,v(l("input",{type:"text",class:"form-control","aria-describedby":"description",placeholder:"Description...","onUpdate:modelValue":t[3]||(t[3]=e=>n.state.newKeep.description=e)},null,512),[[I,n.state.newKeep.description]])]),at],32)])])])])]))));Le.render=st,Le.__scopeId="data-v-6ab676d8";var lt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Le});const ot={setup(){const t=e({newVault:{isPrivate:!1}});return{state:t,async createVault(){try{await z.createVault(t.newVault),t.newVault={isPrivate:!1},m("#new-vault-modal").modal("hide"),t.newVault={}}catch(e){D.toast(e,"error")}}}}},nt=y("data-v-1c04553b");c("data-v-1c04553b");const rt={class:"new-vault-modal"},it={class:"modal",id:"new-vault-modal",tabindex:"-1",role:"dialog","aria-labelledby":"modelTitleId","aria-hidden":"true"},ct={class:"modal-dialog",role:"document"},dt={class:"modal-content"},ut=l("div",{class:"modal-header"},[l("h5",{class:"modal-title"}," Create New Vault "),l("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[l("span",{"aria-hidden":"true"},"×")])],-1),pt={class:"modal-body text-left"},mt={class:"form-group"},vt=l("label",{for:""},"Vault Name",-1),gt={class:"form-group"},ft=l("label",{for:"body"},"Description",-1),bt={class:"form-group"},yt=l("label",{for:"isPrivate",class:"form-label pr-1"},"Private Vault",-1),wt=l("div",{class:"modal-footer"},[l("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Close "),l("button",{type:"submit",class:"btn btn-primary"}," Save ")],-1);d();const ht=nt(((e,t,o,n,r,i)=>(a(),s("div",rt,[l("div",it,[l("div",ct,[l("div",dt,[ut,l("div",pt,[l("form",{onSubmit:t[4]||(t[4]=f(((...e)=>n.createVault&&n.createVault(...e)),["prevent"]))},[l("div",mt,[vt,v(l("input",{type:"text",class:"form-control","aria-describedby":"name",placeholder:"Name...","onUpdate:modelValue":t[1]||(t[1]=e=>n.state.newVault.name=e)},null,512),[[I,n.state.newVault.name]])]),l("div",gt,[ft,v(l("input",{type:"text",class:"form-control","aria-describedby":"description",placeholder:"Description...","onUpdate:modelValue":t[2]||(t[2]=e=>n.state.newVault.description=e)},null,512),[[I,n.state.newVault.description]])]),l("div",bt,[yt,v(l("input",{class:"form-checkbox",type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=e=>n.state.newVault.isPrivate=e)},null,512),[[S,n.state.newVault.isPrivate]])]),wt],32)])])])])]))));ot.render=ht,ot.__scopeId="data-v-1c04553b";var kt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ot});const Vt={props:{vault:{type:Object,required:!0}},setup:()=>({}),components:{}},Kt=y("data-v-7ac963e0");c("data-v-7ac963e0");const _t={class:"card text-white bg-dark m-2",style:{"max-width":"10rem","min-width":"12rem"}},xt={key:0,class:"card-header text-left"},Pt={key:1,class:"card-header text-left"},Tt={class:"card-body"},It={class:"card-title",title:"Open vault details"},St={class:"card-text"};d();const At=Kt(((e,t,o,r,i,c)=>{const d=n("router-link");return a(),s("div",_t,[1==o.vault.isPrivate?(a(),s("div",xt," Private Vault ")):(a(),s("div",Pt," Public Vault ")),l("div",Tt,[l(d,{class:"mt-auto ml-auto vault",to:{name:"VaultDetails",params:{id:o.vault.id}}},{default:Kt((()=>[l("h4",It,b(o.vault.name),1)])),_:1},8,["to"]),l("p",St,b(o.vault.description),1)])])}));Vt.render=At,Vt.__scopeId="data-v-7ac963e0";var Ct=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Vt});const Et=A(E);!function(e){const t={"./components/Keep.vue":W,"./components/KeepModal.vue":Ve,"./components/Navbar.vue":ze,"./components/NewKeepModal.vue":lt,"./components/NewVaultModal.vue":kt,"./components/Vault.vue":Ct};Object.entries(t).forEach((([t,a])=>{const s=a.name||t.substr(t.lastIndexOf("/")+1).replace(/\.\w+$/,"");e.component(s,a.default)}))}(Et),Et.use(Z).mount("#app");export{C as A,D as P,R as a,$ as k,N as l,z as v};
